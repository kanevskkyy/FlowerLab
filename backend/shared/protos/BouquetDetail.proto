syntax = "proto3";

message GetBouquetRequest {
    string id = 1; 
}

message SizeModel {
    string id = 1;
    string name = 2;
}

message FlowerInBouquetModel {
    string id = 1;
    string name = 2;
    int32 quantity = 3;
}

message BouquetImageModel {
    string id = 1;
    string imageUrl = 2;
    int32 position = 3;
    bool isMain = 4; 
}

message BouquetSizeModel {
    string sizeId = 1;
    string sizeName = 2;
    double price = 3;
    repeated FlowerInBouquetModel flowers = 4; 
    repeated BouquetImageModel images = 5; 
    int32 maxAssemblableCount = 6; 
    bool isAvailable = 7; 
}

message EventModel {
    string id = 1;
    string name = 2;
}

message RecipientModel {
    string id = 1;
    string name = 2;
}

message BouquetResponse {
    string id = 1;
    string name = 2;
    string description = 3;
    string mainPhotoUrl = 4; 
    repeated BouquetSizeModel sizes = 5; 
    repeated EventModel events = 6; 
    repeated RecipientModel recipients = 7; 
    string createdAt = 8; 
}

message GetBouquetsRequest {
    int32 page = 1;
    int32 pageSize = 2;
    string sortBy = 3;
    string name = 4;
    double minPrice = 5;
    double maxPrice = 6;
    repeated string flowerIds = 7;
    repeated string eventIds = 8;
    repeated string recipientIds = 9;
    repeated string sizeIds = 10;
    repeated int32 quantities = 11;
}

message BouquetSimpleModel {
    string id = 1;
    string name = 2;
    double price = 3;
    string mainPhotoUrl = 4;
    repeated BouquetSizeModel sizes = 5; 
}

message GetBouquetsResponse {
    repeated BouquetSimpleModel items = 1;
    int32 totalCount = 2;
    int32 totalPages = 3;
    int32 currentPage = 4;
}

service BouquetGrpcService {
    rpc GetBouquetById (GetBouquetRequest) returns (BouquetResponse);
    rpc GetBouquets (GetBouquetsRequest) returns (GetBouquetsResponse);
}